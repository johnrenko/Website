---
import BaseLayout from "../layouts/BaseLayout.astro";
import HeroHeader from "../components/HeroHeader.astro";
import ExperimentsGrid from "../components/ExperimentsGrid.astro";
import { getCollection } from 'astro:content';
import CVSummary from "../components/CVSummary.astro";
import WorkCard from "../components/WorkCard.astro";
const works = await getCollection('work');
const sortedWorks = works
  .slice()
  .sort((a, b) => {
    const orderA = typeof a.data.order === 'number' ? a.data.order : Number.POSITIVE_INFINITY;
    const orderB = typeof b.data.order === 'number' ? b.data.order : Number.POSITIVE_INFINITY;
    if (orderA !== orderB) return orderA - orderB; // lower order first
    // Fallback: most recent date first (date is YYYY-MM)
    return (b.data.date || '').localeCompare(a.data.date || '');
  });
const experiments = await getCollection('experiments');
---
<BaseLayout title="John Dutamby â€” Portfolio" >
  <HeroHeader name="JOHN DUTAMBY" />

  <section id="work" class="mb-32">
    <div class="mb-6">
      <h2 class="font-display text-3xl">Work</h2>
    </div>
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
      {sortedWorks.map((w) => (
        <WorkCard
          href={`/work/${w.id}`}
          company={w.data.title.split(' â€” ')[0] ?? ''}
          role={w.data.role}
          title={w.data.summary}
          cover={w.data.cover}
          coverAlt={w.data.title}
        />
      ))}
    </div>
  </section>

  <!-- Animated Separator -->
  <div class="section-separator mb-32">
    <div class="separator-line"></div>
    <div class="separator-dot"></div>
    <div class="separator-line"></div>
  </div>

  <section id="experiments" class="mb-32">
    <div class="mb-6">
      <h2 class="font-display text-3xl">Experiments</h2>
    </div>
    <ExperimentsGrid />
  </section>

  <!-- Animated Separator -->
  <div class="section-separator mb-32">
    <div class="separator-line"></div>
    <div class="separator-dot"></div>
    <div class="separator-line"></div>
  </div>

  <section id="cv" class="mb-32">
    <h2 class="font-display text-3xl mb-4">Curriculum Vitae</h2>
    <CVSummary />
  </section>

  <!-- Animated Separator -->
  <div class="section-separator mb-32">
    <div class="separator-line"></div>
    <div class="separator-dot"></div>
    <div class="separator-line"></div>
  </div>

  <section id="contact" class="mb-32">
    <div class="text-center max-w-2xl mx-auto">
      <h2 class="font-display text-3xl mb-6">Let's Connect</h2>
      <p class="text-zinc-600 mb-8 text-lg leading-relaxed">
        I'm always interested in new opportunities, collaborations, and conversations about design, product, and innovation.
      </p>
      
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-6 mb-8">
        <a href="mailto:john.dutamby@..." class="contact-card group">
          <div class="contact-icon">âœ‰</div>
          <div class="contact-content">
            <h3 class="contact-title">Email</h3>
            <p class="contact-subtitle">john.dutamby@...</p>
          </div>
        </a>
        
        <a href="https://www.linkedin.com/in/johndutamby/" class="contact-card group" rel="noopener" target="_blank">
          <div class="contact-icon">ðŸ’¼</div>
          <div class="contact-content">
            <h3 class="contact-title">LinkedIn</h3>
            <p class="contact-subtitle">Professional Network</p>
          </div>
        </a>
      </div>
      
      <div class="text-sm text-zinc-500">
        <p>Available for freelance projects and full-time opportunities</p>
      </div>
    </div>
  </section>
</BaseLayout>


